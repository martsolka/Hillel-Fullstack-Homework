# –°–¢–ê–†–¢ DATABASE üöÄ

**–ù–ê–í–Ü–ì–ê–¶–Ü–Ø:**

üëâ [–î–ó 32. MySQL: SELECT.](#hw-32)

üëâ [–î–ó 33. MySQL: INSERT \ UPDATE \ DELETE.](#hw-33)

üëâ [–î–ó 34. MySQL: One-to-many.](#hw-34)

üëâ [–î–ó 35. MySQL: Many-to-many.](#hw-35)

üëâ [–î–ó 36. MySQL: –ü—ñ–¥—Å—É–º–æ–∫](#hw-36)

---

## <a id="hw-32">–î–ó 32. MySQL: SELECT </a>

### üìù –°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ SQL –∑–∞–ø–∏—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ `users` üë•:

```sql
CREATE TABLE `home`.`users`(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(100) NOT NULL,
    `email` VARCHAR(255) NOT NULL,
    `status` ENUM('active', 'inactive', 'blocked') NOT NULL DEFAULT 'active',
    `role` ENUM('admin', 'manager', 'player', 'user') NOT NULL DEFAULT 'user',
    `rating` TINYINT NULL,
    `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY(`id`)
) ENGINE = InnoDB;
```

- –û–±–µ—Ä—ñ—Ç—å –≤—Å—ñ—Ö –∞–¥–º—ñ–Ω—ñ–≤ (—é–∑–µ—Ä–∏, —è–∫—ñ –º–∞—é—Ç—å —Ä–æ–ª—å admin).
  
  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  SELECT * FROM `home`.`users` WHERE `role` = 'admin';
  ```

- –û–±–µ—Ä—ñ—Ç—å –≤—Å—ñ—Ö —é–∑–µ—Ä—ñ–≤, —è–∫—ñ –º–∞—é—Ç—å –µ–º–µ–π–ª —É –¥–æ–º–µ–Ω—ñ "@gmail.com".

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  SELECT * FROM `home`.`users` WHERE `email` LIKE '%@gmail.com';
  ```

- –û–±–µ—Ä—ñ—Ç—å id —Ç–∞ name —é–∑–µ—Ä—ñ–≤, –∫–æ—Ç—Ä—ñ –º–∞—é—Ç—å –Ω–µ –∞–∫—Ç–∏–≤–Ω–∏–π —Å—Ç–∞—Ç—É—Å (blocked –∞–±–æ inactive) —Ç–∞ —Ä–æ–ª—å user.

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  SELECT `id`, `name` FROM `home`.`users` WHERE (`status` = 'blocked' OR `status` = 'inactive') AND `role` = 'user';
  ```
  ```sql
  SELECT `id`, `name` FROM `home`.`users` WHERE `status` IN ('blocked', 'inactive') AND `role` = 'user';
  ```

- –û–±–µ—Ä—ñ—Ç—å —é–∑–µ—Ä—ñ–≤ –∑ id 4, 34, 3426, 63479.

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  SELECT * FROM `home`.`users` WHERE `id` IN (4, 34, 3426, 63479);
  ```

- –û–±–µ—Ä—ñ—Ç—å —é–∑–µ—Ä—ñ–≤, —è–∫—ñ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –ø—ñ–∑–Ω—ñ—à–µ "2024-01-01 00:00:00" (–¥–∞—Ç—É –º–æ–∂–Ω–∞ –≤–∫–∞–∑—É–≤–∞—Ç–∏ —Ç–∞–∫ —Å–∞–º–æ, —è–∫ —Ü–µ –ø—Ä–æ–ø–∏—Å–∞–Ω–æ —É –∑–∞–≤–¥–∞–Ω–Ω—ñ).

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  SELECT * FROM `home`.`users` WHERE `created_at` > '2024-01-01 00:00:00';
  ```

- –û–±–µ—Ä—ñ—Ç—å –≤—Å—ñ—Ö —é–∑–µ—Ä—ñ–≤, –∫–æ—Ç—Ä—ñ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω—ñ —É 2023-–º—É —Ä–æ—Ü—ñ.

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  SELECT * FROM `home`.`users` WHERE `created_at` LIKE '2023%';
  ```

- –ü—ñ–¥—Ä–∞—Ö—É–π—Ç–µ —Å–µ—Ä–µ–¥–Ω—ñ–π —Ä–µ–π—Ç–∏–Ω–≥ –≥—Ä–∞–≤—Ü—ñ–≤ (rating –ø–æ–ª–µ –≤–∏–∑–Ω–∞—á–µ —Ä–µ–π—Ç–∏–Ω–≥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –∞ –≥—Ä–∞–≤—Ü—è–º–∏ —î –≤—Å—ñ, —Ö—Ç–æ –º–∞—î —Ä–æ–ª—å player).

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  SELECT AVG(`rating`) AS 'average_rating' FROM `home`.`users` WHERE `role` = 'player';
  ```

- –û–±–µ—Ä—ñ—Ç—å —Ç–æ–ø 10 –∫—Ä–∞—â–∏—Ö –∑–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–º –≥—Ä–∞–≤—Ü—ñ–≤ (–≥—Ä–∞–≤—Ü—è–º–∏ —î –≤—Å—ñ, —Ö—Ç–æ –º–∞—î —Ä–æ–ª—å player).

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  SELECT * FROM `home`.`users` WHERE `role` = 'player' ORDER BY `rating` DESC LIMIT 10;
  ```

- –ó–Ω–∞–π–¥—ñ—Ç—å –Ω–∞–π–±—ñ–ª—å–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ —Å–µ—Ä–µ–∑ –≤—Å—ñ—Ö –≥—Ä–∞–≤—Ü—ñ–≤ (–≥—Ä–∞–≤—Ü—è–º–∏ —î –≤—Å—ñ, —Ö—Ç–æ –º–∞—î —Ä–æ–ª—å player).

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  SELECT MAX(`rating`) FROM `home`.`users` WHERE `role` = 'player';
  ```

---

## <a id="hw-33">–î–ó 33. MySQL: INSERT \ UPDATE \ DELETE</a>

### üìù –°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ SQL –∑–∞–ø–∏—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ `users` üë•:

```sql
CREATE TABLE `home`.`users`(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(100) NOT NULL,
    `email` VARCHAR(255) NOT NULL,
    `status` ENUM('active', 'inactive', 'blocked') NOT NULL DEFAULT 'active',
    `role` ENUM('admin', 'manager', 'player') NOT NULL DEFAULT 'player',
    `rating` TINYINT NULL,
    `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY(`id`)
) ENGINE = InnoDB;
```


- –ù–∞–ø–∏—à—ñ—Ç—å –∑–∞–ø–∏—Ç –Ω–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è 1 —Ä—è–¥–∫–∞ —É —Ç–∞–±–ª–∏—Ü—é. –ó–Ω–∞—á–µ–Ω–Ω—è –æ–±–µ—Ä—ñ—Ç—å –Ω–∞ —Å–≤—ñ–π —Ä–æ–∑—Å—É–¥.

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  INSERT INTO `home`.`users` (`name`, `email`, `status`, `role`, `rating`) VALUES ('Solomia', 'martsolka@gmail.com', 'active', 'player', 5);
  ```

- –ù–∞–ø–∏—à—ñ—Ç—å –∑–∞–ø–∏—Ç –Ω–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –æ–¥—Ä–∞–∑—É 5 —Ä—è–¥–∫—ñ–≤ —É —Ç–∞–±–ª–∏—Ü—é. –ó–Ω–∞—á–µ–Ω–Ω—è –æ–±–µ—Ä—ñ—Ç—å –Ω–∞ —Å–≤—ñ–π —Ä–æ–∑—Å—É–¥.

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  INSERT INTO `home`.`users` (`name`, `email`, `status`, `role`, `rating`) 
  VALUES ('Sophia', 'sophia@gmail.com', 'inactive', 'manager'),
    ('Vlad', 'vlad@mail.ru', 'inactive'),
    ('Vitalii', 'vitalii@gmail.com', 'blocked',  NULL, 4),
    ('Svitlana', 'svitlana@gmail.com', 'active', 'admin'),
    ('Sergei', 'sergei@gmail.com', 'active', NULL, 5);
  ```

- –ù–∞–ø–∏—à—ñ—Ç—å –∑–∞–ø–∏—Ç, —è–∫–∏–π –±—É–¥–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ id = 1 –Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è "blocked".

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  UPDATE `home`.`users` SET `status` = 'blocked' WHERE `id` = 1;
  ```

- –ù–∞–ø–∏—à—ñ—Ç—å –∑–∞–ø–∏—Ç, —è–∫–∏–π –±—É–¥–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –µ–º–µ–π–ª–æ–º –¥–æ–º–µ–Ω—É @mail.ru –Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è "blocked".

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  UPDATE `home`.`users` SET `status` = 'blocked' WHERE `email` LIKE '%@mail.ru';
  ```

- –ù–∞–ø–∏—à—ñ—Ç—å –∑–∞–ø–∏—Ç, —è–∫–∏–π –≤–∏–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å  –∑ id = 1.

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  DELETE FROM `home`.`users` WHERE `id` = 1;
  ```

- –ó–∞–ø–∏—Ç, —è–∫–∏–π –≤–∏–¥–∞–ª–∏—Ç—å –≤—Å—ñ—Ö –≥—Ä–∞–≤—Ü—ñ–≤ (—Ö—Ç–æ –º–∞—î —Ä–æ–ª—å player), –∫–æ—Ç—Ä—ñ –±—É–ª–∏ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω—ñ (—Å—Ç–≤–æ—Ä–µ–Ω—ñ) —Ä–∞–Ω—ñ—à–µ 2011 —Ä–æ–∫—É.

  **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**

  ```sql
  DELETE FROM `home`.`users` WHERE `role` = 'player' AND `created_at` < '2011-01-01 00:00:00';
  ```

–î–æ–¥–∞—Ç–∫–æ–≤–æ: 

- –ù–∞–ø–∏—à—ñ—Ç—å –∑–∞–ø–∏—Ç, —è–∫–∏–π –æ–Ω–æ–≤–∏—Ç—å –≤—Å—ñ —Ä–µ–π—Ç–∏–Ω–≥–∏ –Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è —É 2 —Ä–∞–∑–∏ –º–µ–Ω—à–µ, –Ω—ñ–∂ –±—É–ª–æ (–æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏)
   
   **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
   
  ```sql
  UPDATE `home`.`users` SET `rating` = ROUND(`rating` / 2, 0) WHERE `rating` IS NOT NULL;
  ```

---

## <a id="hw-34">–î–ó 34. MySQL: One-to-many</a>

### üìù –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑–∏ –¥–∞–Ω–Ω–∏—Ö –¥–ª—è –ø–æ—Ä—Ç–∞–ª—É –Ω–æ–≤–∏–Ω.

–í–∏–º–æ–≥–∏:

- –º–∏ –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ —Å—É—Ç–Ω—ñ—Å—Ç—å –Ω–æ–≤–∏–Ω;

- –∫–æ–∂–Ω–∞ –Ω–æ–≤–∏–Ω–∞ –ø–æ–≤–∏–Ω–Ω–∞ –º–∞—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–æ–≤–∏–Ω–∏ (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ);

- –∫–æ–∂–Ω–∞ –Ω–æ–≤–∏–Ω–∞ –º–æ–∂–µ –º–∞—Ç–∏ –±–∞–Ω–Ω–µ—Ä;

- –∫–æ–∂–Ω–∞ –Ω–æ–≤–∏–Ω–∞ –º–æ–∂–µ –º–∞—Ç–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä—ñ;

- –∫–æ–º–º–µ–Ω—Ç–∞—Ä—ñ –º–æ–∂–µ –∑–∞–ª–∏—à–∞—Ç–∏ –ª–∏—à–µ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–Ω–∏–π –∫–æ—Ä–∏—Ç—Å—Ç—É–≤–∞—á;

- –∫–æ–∂–Ω–∞ –Ω–æ–≤–∏–Ω–∞ –º–æ–∂–µ –º–∞—Ç–∏ –æ–¥–Ω—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é (—Å–ø–æ—Ä—Ç, –º–∏—Å—Ç–µ—Ü—Ç–≤–æ —ñ —Ç–¥);

- –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤–∏–Ω–∏-—á–µ—Ä–Ω–µ—Ç–∫–∏ (—Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–Ω—É, –∫–æ—Ç–æ—Ä–∞ –Ω–µ –±—É–¥–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—å —É –ø—É–±–ª—ñ—á–Ω—ñ–π —Å–µ–∫—Ü—ñ—ó);

- –Ω–æ–≤–∏–Ω–∏ –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ –∞–≤—Ç–æ—Ä–∞, –∫–æ–∂–µ–Ω –∞–≤—Ç–æ—Ä - —Ü–µ —Ç–∞–∫–æ–∂ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á;

- –º–∏ —Ö–æ—á–µ–º–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤ –∫–æ–∂–Ω–æ—ó –Ω–æ–≤–∏–Ω–∏;

- –∫–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –º–∞—Ç–∏ –¥–µ–∫—ñ–ª—å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ (–¥–æ –∫–æ–Ω—Ç–∞–∫—ñ–≤ –º–∏ –º–æ–∂–µ–º–æ –≤—ñ–¥–æ–∫—Ä–µ–º–∏—Ç–∏ –µ–º–µ–π–ª, —Ç–µ–ª–µ—Ñ–æ–Ω, —Å–∫–∞–π–ø —ñ —Ç–¥);

- –∫–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –º–∞—Ç–∏ –æ–¥–Ω—É –∑ —Ä–æ–ª–µ–π (—Ä–æ–ª—ñ –ø–æ–≤–∏–Ω–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—è –≤ –æ–∫—Ä–µ–º—ñ–π —Ç–∞–±–ª–∏—Ü—ñ).

–ó–∞ –±–∞–∂–∞–Ω–Ω—è–º: 

- –∫–æ–º–º–µ–Ω—Ç–∞—Ä—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω–Ω–∏–º–∏ (—Ç–æ–±—Ç–æ –º–∏ –º–æ–∂–µ–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞ —ñ–Ω—à–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä).

### üíª –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è üíª

![news database diagram](./news-db.drawio.svg)

C–ø—Ä–æ–µ–∫—Ç–æ–≤–∞–Ω–æ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Å–µ—Ä–≤—ñ—Å—É [https://app.diagrams.net/](https://app.diagrams.net/)

---

## <a id="hw-35">–î–ó 35. MySQL: Many-to-many</a>

### üìù –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑–∏ –¥–∞–Ω–Ω–∏—Ö –¥–ª—è —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç –º–∞–≥–∞–∑–∏–Ω—É.

–í–∏–º–æ–≥–∏:

- —Ç–∞–±–ª–∏—Ü—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (—ñ–º'—è, –µ–º–µ–π–ª, –ø–∞—Ä–æ–ª—å, —Ä–æ–ª—å);

- —Ç–∞–±–ª–∏—Ü—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ (–Ω–∞–∑–≤–∞, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ —Å–∫–ª–∞–¥—ñ, —Ü—ñ–Ω–∞, –æ–ø–∏—Å, —Ä–µ–π—Ç–∏–Ω–≥):
  - –∫–æ–∂–µ–Ω –ø—Ä–æ–¥—É–∫—Ç –º–æ–∂–µ –º–∞—Ç–∏ –¥–µ–∫—ñ–ª—å–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å;

- —Ç–∞–±–ª–∏—Ü—è –≤—ñ–¥–≥—É–∫—ñ–≤ –¥–æ —Ç–æ–≤–∞—Ä—ñ–≤, —è–∫—ñ –º–æ–∂—É—Ç –∑–∞–ª–∏—à–∞—Ç–∏ –ª–∏—à–µ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ;

- –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø—Ä–æ–¥—É–∫—Ç—ñ–≤
  - (–∑–∞ –±–∞–∂–∞–Ω–Ω—è–º) –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –º–æ–∂—É—Ç –±—É—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–¥–Ω–∞ –≤ –æ–¥–Ω—É; 

- —Ç–∞–±–ª–∏—Ü—è –∑–∞–º–æ–≤–ª–µ–Ω—å:
  - –∫–æ–∂–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω—è –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–æ–≤–∏–Ω–Ω–µ –º–∞—Ç–∏ –∑–≤'—è–∑–æ–∫ –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º, —è–∫–∏–π –π–æ–≥–æ –æ—Ñ–æ—Ä–º–∏–≤;

  - –∫–æ–∂–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –º–æ–∂–µ –º–∞—Ç–∏ –¥–µ–∫—ñ–ª—å–∫–∞ —Ç–æ–≤–∞—Ä—ñ–≤ (—Ç–∞–∫–æ–∂ —Ç–æ–≤–∞—Ä–∏ –º–æ–∂—É—Ç –±—É—Ç–∏ —É –∫—ñ–ª—å–∫–æ—Å—Ç—ñ 1, 2, 3, ...);

  - –∫–æ–∂–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω–µ –º–∞—Ç–∏ –¥–∞—Ç—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —Å—Ç–∞—Ç—É—Å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è;

- –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø—Ä–æ–º–æ–∞–∫—Ü—ñ–π:
  - –∫–æ–∂–Ω–∞ –ø—Ä–æ–º–æ–∞–∫—Ü—ñ—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ù–æ–≤–æ—Ä—ñ—á–Ω–∏–π —Ä–æ–∑–ø—Ä–æ–¥–∞–∂) –º–æ–∂–µ –≤–∫–ª—é—á–∞—Ç–∏ –¥–µ–∫—ñ–ª—å–∫–∞ –∞–∫—Ü—ñ–π–Ω–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤;

  - –∑–Ω–∏–∂–∫—É –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç—É –º–æ–∂–Ω–∞ –≤–∫–∞–∑—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º–æ;

  - –∫–æ–∂–Ω–∞ –ø—Ä–æ–º–æ–∞–∫—Ü—ñ—è –º–∞—î –Ω–∞–∑–≤—É, –¥–∞—Ç—É —Å—Ç–∞—Ä—Ç—É —ñ –¥–∞—Ç—É –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è.

### üíª –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è üíª

![online store database diagram](./online-store-db.drawio.svg)

C–ø—Ä–æ–µ–∫—Ç–æ–≤–∞–Ω–æ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Å–µ—Ä–≤—ñ—Å—É [https://app.diagrams.net/](https://app.diagrams.net/)

---

## <a id="hw-36">–î–ó 36. MySQL: –ü—ñ–¥—Å—É–º–æ–∫</a>

### üìù –°—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ SQL –∑–∞–ø–∏—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ç–∞–±–ª–∏—Ü—å:

![online it school database](./online-it-school-db.png)

- –æ–±–µ—Ä—ñ—Ç—å –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ —Ä–æ–ª–ª—é 'admin' (id —Ä–æ–ª—ñ –Ω–µ–≤—ñ–¥–æ–º–æ)
  ```sql
  SELECT * FROM `users` AS u
  LEFT JOIN `roles` AS r ON u.role_id = r.id
  WHERE r.name = 'admin';
  ```
- –æ–±–µ—Ä—ñ—Ç—å –≤—Å—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Å–æ—Ü—ñ–∞–ª—å–Ω—É –º–µ—Ä–µ–∂—É –∑ —ñ–º–µ–Ω–µ–º 'telegram' (id —Å–æ—Ü—ñ–∞–ª—å–Ω–æ—Ö –º–µ—Ä–µ–∂—ñ  –Ω–µ–≤—ñ–¥–æ–º–æ) –¥–ª—è –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∏—ñ–≤ –∑ —Ä–æ–ª–ª—é 'teacher' (id —Ä–æ–ª—ñ —Ç–∞–∫–æ–∂ –Ω–µ–≤—ñ–¥–æ–º–æ) 
  ```sql
  SELECT us.url AS teachers_telegrams FROM `user_socials` AS us
  LEFT JOIN `socials` AS s ON us.social_id = s.id
  LEFT JOIN `users` AS u ON us.user_id = u.id
  LEFT JOIN `roles` AS r ON u.role_id = r.id
  WHERE s.name = 'telegram' AND r.name = 'teacher';
  ```
- –ø—ñ–¥—Ä–∞—Ö—É–π—Ç–µ —Å–µ—Ä–µ–¥–Ω—ñ–π –±–∞–ª –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–ø–∏
  ```sql
  SELECT g.name AS group_name, AVG(sh.rating) AS avg_rating FROM `groups` AS g
  LEFT JOIN `group_student` AS gs ON g.id = gs.group_id
  LEFT JOIN `student_homework` AS sh ON gs.user_id = sh.student_id
  GROUP BY group_name;
  ```
- –ø—ñ–¥—Ä–∞—Ö—É–π—Ç–µ —Å–µ—Ä–µ–¥–Ω—ñ–π –±–∞–ª –∫–æ–∂–Ω–æ–≥–æ –∫—É—Ä—Å—É
  ```sql
  SELECT c.name AS course_name, AVG(sh.rating) AS avg_rating FROM `groups` AS g
  LEFT JOIN `group_student` AS gs ON g.id = gs.group_id
  LEFT JOIN `student_homework` AS sh ON gs.user_id = sh.student_id
  LEFT JOIN `courses` as c ON g.course_id = c.id
  GROUP BY course_name;
  ```

- –æ–±–µ—Ä—ñ—Ç—å –≤—Å—ñ –Ω–µ–≤–∏–∫–æ–Ω–∞–Ω—ñ –¥–æ–º–∞—à–Ω—ñ —Ä–æ–±–æ—Ç–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ –∑  id = 1
  ```sql
  SELECT * FROM `homeworks` AS h
  LEFT JOIN `student_homework` AS sh ON h.id = sh.homework_id
  WHERE sh.student_id = 1 AND sh.passed_at IS NULL;
  ```

- –æ–±–µ—Ä—ñ—Ç—å —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø, –≤ –∫–æ—Ç—Ä–∏—Ö –ø—Ä–∏–π–º–∞—î —É—á–∞—Å—Ç—å —Å—Ç—É–¥–µ–Ω—Ç –∑ id = 1
  ```sql
  SELECT * FROM `groups` AS g
  LEFT JOIN `group_student` AS gs ON g.id = gs.group_id
  WHERE gs.user_id = 1;
  ```

- –æ–±–µ—Ä—ñ—Ç—å —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –≤ –∫–æ—Ç—Ä–∏—Ö —é–∑–µ—Ä –∑ id = 1 —î –≤–∏–∫–ª–∞–¥–∞—á–µ–º
  ```sql
  SELECT * FROM `groups` AS g
  LEFT JOIN `users` AS u ON g.teacher_id = u.id
  LEFT JOIN `roles` AS r ON u.role_id = r.id
  WHERE u.id = 1 AND r.name = 'teacher';
  ```

- –æ–±–µ—Ä—ñ—Ç—å c–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –≤ –∫–æ—Ç—Ä–∏—Ö –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É—á–∞—Å–Ω–∏–∫—ñ–≤ –±—ñ–ª—å—à–µ 5-—Ç–∏
  ```sql
  SELECT * FROM `groups` AS g
  LEFT JOIN `group_student` AS gs ON g.id = gs.group_id
  GROUP BY g.id
  HAVING COUNT(gs.user_id) > 5;
  ```

- –æ–±–µ—Ä—ñ—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–º–∞—à–Ω—ñ—Ö —Ä–æ–±i—Ç –≥—Ä—É–ø–ø–∏ –∑ id=1, –¥–µ —â–µ –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ—ó –∑–¥–∞–Ω–Ω–æ—ó —Ä–æ–±–æ—Ç–∏
  ```sql
  SELECT h.* FROM `homeworks` AS h
  LEFT JOIN `student_homework` AS sh ON h.id = sh.homework_id
  LEFT JOIN `group_student` AS gs ON sh.student_id = gs.user_id
  WHERE gs.group_id = 1
  ORDER BY h.id
  HAVING sh.id IS NULL;
  ```